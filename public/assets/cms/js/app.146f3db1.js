!function(t){function e(e){for(var r,a,c=e[0],u=e[1],s=e[2],l=0,f=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);for(d&&d(e);f.length;)f.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,a=1;a<n.length;a++){var u=n[a];0!==i[u]&&(r=!1)}r&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},a={app:0},i={app:0},o=[];function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[];a[t]?e.push(a[t]):0!==a[t]&&{"chunk-0ce4d726":1}[t]&&e.push(a[t]=new Promise((function(e,n){for(var r="css/"+({}[t]||t)+"."+{"chunk-0ce4d726":"4bd8d0bf","chunk-2d0a314a":"31d6cfe0","chunk-2d0a437d":"31d6cfe0","chunk-2d0ab7fe":"31d6cfe0","chunk-2d0ae539":"31d6cfe0","chunk-2d0b19b9":"31d6cfe0","chunk-2d0b5d0a":"31d6cfe0","chunk-2d0b97c2":"31d6cfe0","chunk-2d0c08f2":"31d6cfe0","chunk-2d0c78c3":"31d6cfe0","chunk-2d0d2eb9":"31d6cfe0","chunk-2d0e267b":"31d6cfe0","chunk-2d0efceb":"31d6cfe0","chunk-2d21aaed":"31d6cfe0","chunk-2d2226bd":"31d6cfe0","chunk-2d238262":"31d6cfe0"}[t]+".css",i=c.p+r,o=document.getElementsByTagName("link"),u=0;u<o.length;u++){var s=o[u],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===r||l===i))return e()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++)if((l=(s=d[u]).getAttribute("data-href"))===r||l===i)return e();var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var r=e&&e.target&&e.target.src||i,o=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete a[t],f.parentNode.removeChild(f),n(o)},f.href=i,document.getElementsByTagName("head")[0].appendChild(f)})).then((function(){a[t]=0})));var n=i[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,r){n=i[t]=[e,r]}));e.push(n[2]=r);var o,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=function(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-0ce4d726":"0ad7e1f4","chunk-2d0a314a":"c3936c53","chunk-2d0a437d":"4ebd1a40","chunk-2d0ab7fe":"f76111c7","chunk-2d0ae539":"69f7a173","chunk-2d0b19b9":"2ec57b2a","chunk-2d0b5d0a":"a800826e","chunk-2d0b97c2":"ac3402eb","chunk-2d0c08f2":"8ab2e23d","chunk-2d0c78c3":"03495877","chunk-2d0d2eb9":"9a465181","chunk-2d0e267b":"e7120f4f","chunk-2d0efceb":"9e8014c4","chunk-2d21aaed":"1557f6ee","chunk-2d2226bd":"88cdabdc","chunk-2d238262":"bc05c985"}[t]+".js"}(t);var s=new Error;o=function(e){u.onerror=u.onload=null,clearTimeout(l);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",s.name="ChunkLoadError",s.type=r,s.request=a,n[1](s)}i[t]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:u})}),12e4);u.onerror=u.onload=o,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/assets/cms/",c.oe=function(t){throw console.error(t),t};var u=window.webpackJsonp=window.webpackJsonp||[],s=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var d=s;o.push([0,"chunk-vendors"]),n()}({0:function(t,e,n){t.exports=n("56d7")},"025e":function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return v})),n.d(e,"b",(function(){return h}));var r=n("ade3"),a=n("5530"),i=n("3835"),o=n("1da1"),c=(n("96cf"),n("ac1f"),n("5319"),n("fb6a"),n("99af"),n("4fad"),n("a15b"),n("b441")),u=n("5ce5"),s=n("2b0e"),l=n("8713"),d=n.n(l);function f(t){var e=t.replace(/-\w/,(function(t){return""+t[1].toUpperCase()}));return e.charAt(0).toUpperCase()+e.slice(1)}var m=function(t){var e=localStorage.getItem("".concat(c.d,":").concat(t));return e?JSON.parse(atob(e)):e},p=function(t){return localStorage.removeItem("".concat(c.d,":").concat(t))},v=function(t,e){var n=btoa(JSON.stringify(e));localStorage.setItem("".concat(c.d,":").concat(t),n)},h=function(t,e){var n=(null==e?void 0:e.url)||t,c={namespaced:!0,state:{pagination:null,params:{},options:{}},actions:{getEntities:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r,o,c,s,l,d,f,m,p,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.commit,o=t.state,c={},o.params)for(s=0,l=Object.entries(o.options);s<l.length;s++)d=Object(i.a)(l[s],2),f=d[0],(m=d[1])&&m.length&&(c[f]=Array.isArray(m)?m.join(","):m);return e.next=5,u.a.client.get("/".concat(n),{params:Object(a.a)(Object(a.a)({},c),{},{per_page:o.options.itemsPerPage,page:o.options.page})});case 5:p=e.sent,v=p.data,r("SET_PAGINATION",v);case 8:case"end":return e.stop()}}),e)})))()},getEntity:function(t,e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.client.get("/".concat(n,"/").concat(e));case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()},createEntity:function(t,e){return u.a.client.post(n,e)},deleteEntity:function(t,e){return u.a.client.delete("".concat(n,"/").concat(e))},deleteEntities:function(t,e){return Object(o.a)(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.dispatch,r.next=3,u.a.client.post("destroy/".concat(n),e);case 3:return r.next=5,a("getEntities");case 5:case"end":return r.stop()}}),r)})))()},updateEntity:function(t,e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.client.put("".concat(n,"/").concat(e.id),e);case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()},nomenclature:function(t,e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.client.get("nomenclature/".concat(n),{params:e});case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()},setTableOptions:function(t,e){(0,t.commit)("SET_TABLE_OPTIONS",e)},setParam:function(t,e){(0,t.commit)("SET_PARAMS",e)}},mutations:{SET_PAGINATION:function(t,e){t.pagination=e},SET_TABLE_OPTIONS:function(t,e){s.default.set(t,"options",e)},SET_PARAMS:function(t,e){Array.isArray(e.value)&&0===e.value.length||null===e.value?s.default.delete(t.params,[e.key]):s.default.set(t.params,e,Object(a.a)(Object(a.a)({},t.params),{},Object(r.a)({},e.key,e.value)))}},getters:{}};return d()(c)(e)}},"0418":function(t,e,n){"use strict";n.r(e);var r=n("5530"),a=n("2f62"),i={computed:Object(r.a)(Object(r.a)({},Object(a.c)("auth",["user"])),{},{userSubmenu:function(){return[]}})},o=n("2877"),c=Object(o.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app-bar",{attrs:{app:"",dark:"",color:"primary",flat:""}},[n("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!t.drawer}}}),n("v-toolbar-title",[n("a",{staticClass:"logo d-flex align-center"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52.2 58.51"}},[n("title",[t._v("Bustion")]),n("g",[n("path",{staticClass:"color-1",attrs:{d:"M23.63.65a5,5,0,0,1,4.94,0l10.58,6,10.49,6.17a5,5,0,0,1,2.46,4.27l.1,12.16-.1,12.17a5,5,0,0,1-2.46,4.27L39.15,51.86l-10.58,6a5.05,5.05,0,0,1-4.94,0l-10.58-6L2.56,45.69A5,5,0,0,1,.1,41.42L0,29.25.1,17.09a5,5,0,0,1,2.46-4.27L13.05,6.65Z"}}),n("path",{staticClass:"color-2",attrs:{d:"M26.1,9l8.11,4.6,8,4.73.07,9.32L42.25,37l-8,4.72-8.11,4.6L18,41.68,10,37l-.07-9.33L10,18.31l8-4.73Z"}}),n("path",{staticClass:"color-2",attrs:{d:"M34.21,13.58,26.1,9v37.3l8.11-4.6,8-4.72.07-9.33-.07-9.32Z"}}),n("path",{staticClass:"color-2",attrs:{d:"M34.21,37.09,26.1,32.5,18,37.09l-8,4.73,8,4.73,8.11,4.59,8.11-4.59,8-4.73Z"}})])])])]),n("v-toolbar-title",[t._v("Панель управления конентом")]),n("v-spacer"),t.user?n("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,a=e.attrs;return[n("v-btn",t._g(t._b({attrs:{text:""}},"v-btn",a,!1),r),[t._v(t._s(t.user.email))])]}}],null,!1,2580517370)},[n("v-list",t._l(t.userSubmenu,(function(e,r){return n("v-list-item",t._g({key:r,attrs:{dense:""}},e.on),[n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.title))]),e.subtitle?n("v-list-item-subtitle",[t._v(" "+t._s(e.subtitle)+" ")]):t._e()],1)],1)})),1)],1):t._e()],1)}),[],!1,null,null,null);e.default=c.exports},"08aa":function(t,e,n){"use strict";n.r(e);var r=n("1da1"),a=n("5530"),i=(n("96cf"),n("a9e3"),n("159b"),n("b64b"),n("d3b7"),n("025e")),o=n("2f62"),c={props:{namespace:{type:String,required:!0},formData:{type:Boolean,default:!1}},data:function(){return{loading:!1,entityPatch:{},localEntity:{}}},computed:{modal:function(){return"modal"in this.$parent.$attrs},id:function(){return this.modal?Number(this.$parent.$attrs.id):Number(this.$route.params.id)},createView:function(){return!this.id},entity:{get:function(){return Object(a.a)(Object(a.a)({},this.localEntity),this.entityPatch)}}},methods:Object(a.a)(Object(a.a)({},Object(o.b)("alerts",["pushAlert"])),{},{createEntity:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.formData?(n=new FormData,Object.keys(t.entityPatch).forEach((function(e){n.append(e,t.entity[e])}))):n=t.entityPatch,e.prev=2,e.next=5,t.$store.dispatch("".concat(t.namespace,"/createEntity"),n);case 5:r=e.sent,a=r.data,t.modal?t.$parent.$emit("create",a):t.$router.push({name:"".concat(Object(i.a)(t.namespace),"List")}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t.pushAlert({type:"error",content:e.t0||"Произошла техническая ошибка"});case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})))()},getEntity:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$store.dispatch("".concat(t.namespace,"/getEntity"),t.id);case 3:t.localEntity=e.sent,t.loading=!1;case 5:case"end":return e.stop()}}),e)})))()},updateEntity:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$store.dispatch("".concat(t.namespace,"/updateEntity"),Object(a.a)({id:t.id},t.entityPatch)).finally((function(){t.loading=!1}));case 3:t.localEntity=e.sent,t.entityPatch={},t.loading=!1,t.modal&&t.$parent.$emit("update",Object(a.a)({},t.localEntity));case 7:case"end":return e.stop()}}),e)})))()},deleteEntity:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.dispatch("".concat(t.namespace,"/deleteEntity"),t.id),t.modal?(t.$parent.$emit("delete"),t.$parent.$emit("update",Object(a.a)({},t.localEntity))):t.$router.push({name:"".concat(Object(i.a)(t.namespace),"List")});case 2:case"end":return e.stop()}}),e)})))()},setValue:function(t,e){this.$set(this.entityPatch,t,e)},removeValue:function(t){this.$delete(this.entityPatch,t)}}),beforeMount:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.createView||!t.id||null===t.id){e.next=3;break}return e.next=3,t.getEntity();case 3:case"end":return e.stop()}}),e)})))()}},u=c,s=(n("acde"),n("2877")),l=Object(s.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.modal&&t.loading?n("v-card",{staticClass:"modal-detail",attrs:{loading:t.loading,outlined:""}},[n("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v(t._s(t.createView?"Создать":"Смотреть")+" "),n("v-spacer"),t.modal?n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$parent.$emit("close")}}},[n("v-icon",[t._v("mdi-close")])],1):t._e()],1),n("v-card-text",[n("v-form",[t._t("form",null,{setValue:t.setValue,entity:t.entity,createView:t.createView})],2)],1),t.createView?n("v-card-actions",[n("v-btn",{attrs:{depressed:"",color:"primary",loading:t.loading},on:{click:t.createEntity}},[t._v("Создать")])],1):n("v-card-actions",[n("v-btn",{attrs:{depressed:"",color:"primary",loading:t.loading,disabled:!Object.keys(t.entityPatch).length},on:{click:t.updateEntity}},[t._v("Обновить")]),n("v-btn",{attrs:{depressed:"",color:"error",loading:t.loading},on:{click:t.deleteEntity}},[t._v("Удалить")])],1)],1):n("v-container",{class:{"pa-0":t.modal,"overflow-hidden":t.modal},attrs:{fluid:t.modal}},[n("v-row",[n("v-col",[n("v-card",{attrs:{loading:t.loading,outlined:""}},[n("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v(t._s(t.createView?"Создать":"Смотреть")+" "),n("v-spacer"),t.modal?n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$parent.$emit("close")}}},[n("v-icon",[t._v("mdi-close")])],1):t._e()],1),n("v-card-text",[n("v-form",[t._t("form",null,{setValue:t.setValue,entity:t.entity,createView:t.createView})],2)],1),t.createView?n("v-card-actions",[n("v-btn",{attrs:{depressed:"",color:"primary",loading:t.loading},on:{click:t.createEntity}},[t._v("Создать")])],1):n("v-card-actions",[n("v-btn",{attrs:{depressed:"",color:"primary",loading:t.loading,disabled:!Object.keys(t.entityPatch).length},on:{click:t.updateEntity}},[t._v("Обновить")]),n("v-btn",{attrs:{depressed:"",color:"error",loading:t.loading},on:{click:t.deleteEntity}},[t._v("Удалить")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=l.exports},"09fb":function(t,e,n){},"0acd":function(t,e,n){"use strict";n("7355")},"0adb":function(t,e,n){"use strict";n.r(e);var r=n("2909"),a=n("5530"),i=(n("4de4"),n("c740"),n("a434"),n("99af"),n("d81d"),n("2ef0")),o={components:{MenuItemDetail:n("7216").default},props:{title:{type:String,default:""},value:{type:[Array,Object],default:function(){return[]}},itemText:{type:[String,Function],default:"title"},single:{type:Boolean,default:!1},relationPicker:{type:Boolean,default:!1}},data:function(){return{items:[],showDetailModal:!1,showDetailEditModal:!1,modalId:null}},methods:{onCreate:function(){this.showDetailModal=!0},setTemplate:function(t,e){this.$set(e,"template_id",t),this.$emit("input",this.value)},onDeleteEditModal:function(){var t=this;this.$emit("input",this.value.filter((function(e){return e.id!==t.modalId}))),this.closeDetailEditModal()},onModalEditUpdate:function(t){var e=this,n=this.sortedValue.findIndex((function(t){return t.id===e.modalId}));this.$set(this.sortedValue,n,Object(a.a)(Object(a.a)(Object(a.a)({},this.sortedValue[n]),t),{},{template_id:this.sortedValue[n].template_id}))},openItemDetail:function(t){this.showDetailEditModal=!0,this.modalId=null==t?void 0:t.id},closeDetailEditModal:function(){this.showDetailEditModal=!1},deleteItem:function(t){var e=Object(i.cloneDeep)(this.sortedValue);e.splice(t,1),this.$emit("input",e)},incrementOrder:function(t){this.$set(t,"order",++t.order),this.$emit("input",this.value)},decrementOrder:function(t){this.$set(t,"order",--t.order),this.$emit("input",this.value)},getItemText:function(t){return"function"==typeof this.itemText?this.itemText(t):t[this.itemText]},openDetailModal:function(){this.showDetailModal=!0},closeDetailModal:function(){this.showDetailModal=!1},confrimEntities:function(){this.single?this.$emit("input",Object(a.a)(Object(a.a)({},this.items),{},{order:0})):this.$emit("input",[].concat(Object(r.a)(this.value),Object(r.a)(this.items.map((function(t){return Object(a.a)(Object(a.a)({},t),{},{order:0})}))))),this.items=[],this.closeDetailModal()}},computed:{sortedValue:function(){return this.single?this.value&&!Array.isArray(this.value)?[this.value]:[]:Object(i.sortBy)(this.value,"order").reverse()}}},c=o,u=(n("ae8e"),n("2877")),s=Object(u.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-card",{attrs:{outlined:""}},[n("v-list",{attrs:{flat:"",subheader:Boolean(t.title.length)}},[t.title?n("v-subheader",[t._v(t._s(t.title))]):t._e(),n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[n("v-btn",{attrs:{color:"primary"},on:{click:t.onCreate}},[t._v("Добавить")])],1)],1)],1),t._l(t.sortedValue,(function(e,r){return n("v-list-item",{key:e.id},[n("v-list-item-content",[n("v-list-item-title",{staticClass:"block-header",on:{click:function(n){return t.openItemDetail(e)}}},[t._v(t._s(t.getItemText(e)))])],1),n("v-list-item-action",[n("div",{staticClass:"actions"},[n("v-btn",{attrs:{icon:""},on:{click:function(n){return n.stopPropagation(),t.decrementOrder(e,r)}}},[n("v-icon",[t._v("mdi-arrow-down-circle")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(n){return n.stopPropagation(),t.incrementOrder(e)}}},[n("v-icon",[t._v("mdi-arrow-up-circle")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.deleteItem(r)}}},[n("v-icon",[t._v("mdi-delete-circle")])],1)],1)])],1)}))],2)],1),n("v-dialog",{attrs:{transition:"dialog-top-transition",value:t.showDetailModal},on:{input:t.closeDetailModal}},[[n("v-card",{staticClass:"modal-detail",attrs:{outlined:""}},[n("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("Добавить блок"),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:t.closeDetailModal}},[n("v-icon",[t._v("mdi-close")])],1)],1),n("v-card-text",[n("picker",{attrs:{multiple:!t.single,returnObject:"",model:"menuItem",itemTe:"",label:"Пункты меню",textSelector:"title"},model:{value:t.items,callback:function(e){t.items=e},expression:"items"}})],1),n("v-card-actions",[n("v-btn",{attrs:{depressed:"",color:"primary"},on:{click:t.confrimEntities}},[t._v("Сохранить")])],1)],1)]],2),t.showDetailEditModal?n("v-dialog",{attrs:{transition:"dialog-top-transition",value:t.showDetailEditModal},on:{input:t.closeDetailEditModal}},[[n("MenuItemDetail",{key:t.modalId,attrs:{modal:"",id:t.modalId},on:{delete:t.onDeleteEditModal,close:t.closeDetailEditModal,update:t.onModalEditUpdate}})]],2):t._e()],1)}),[],!1,null,"ce2e97ee",null);e.default=s.exports},"0c60":function(t,e,n){},"14db":function(t,e,n){var r={"./components/AttributesPicker.vue":"9cdc","./components/CompanyLayout.vue":"d4d2","./components/Content.vue":"9d26","./components/ContentEditor.vue":"9738","./components/Detail.vue":"08aa","./components/EditList.vue":"5205","./components/EditListMenu.vue":"0adb","./components/Footer.vue":"fd2d","./components/Header.vue":"0418","./components/List.vue":"2e90","./components/Menu.vue":"fb62","./components/Picker.vue":"72d2","./components/WithRelationPicker.vue":"553d"};function a(t){var e=i(t);return n(e)}function i(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}a.keys=function(){return Object.keys(r)},a.resolve=i,t.exports=a,a.id="14db"},"2e90":function(t,e,n){"use strict";n.r(e);var r=n("1da1"),a=n("5530"),i=(n("d81d"),n("96cf"),n("2f62")),o=n("025e"),c={props:{namespace:{type:String,required:!0},headers:{type:Array,required:!0}},data:function(){return{loading:!1,fab:!1,selected:[]}},methods:Object(a.a)(Object(a.a)({},Object(i.b)("alerts",["pushAlert"])),{},{getEntities:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.$store.dispatch("".concat(t.namespace,"/getEntities"));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),t.pushAlert({type:"error",content:(null===e.t0||void 0===e.t0||null===(n=e.t0.data)||void 0===n?void 0:n.exception)||"Произошла техническая ошибка"});case 9:return e.prev=9,t.loading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})))()},deleteEntities:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,n=t.selected.map((function(t){return t.id})),e.next=4,t.$store.dispatch("".concat(t.namespace,"/deleteEntities"),n);case 4:t.loading=!1;case 5:case"end":return e.stop()}}),e)})))()},toCreateRoute:function(){this.$router.push({name:"".concat(Object(o.a)(this.namespace),"Create")})},toDetailRoute:function(t){var e=t.id;this.$router.push({name:"".concat(Object(o.a)(this.namespace),"Detail"),params:{id:e}})}}),computed:Object(a.a)(Object(a.a)({},Object(i.c)({pagination:function(t){return t[this.namespace].pagination},options:function(t){return t[this.namespace].options},items:function(){var t;return null===(t=this.pagination)||void 0===t?void 0:t.data}})),{},{moduleOptions:{get:function(){return this.options},set:function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.loading){t.next=5;break}return t.next=3,this.$store.dispatch("".concat(this.namespace,"/setTableOptions"),e);case 3:return t.next=5,this.getEntities();case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}})},u=c,s=(n("f62b"),n("2877")),l=Object(s.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-data-table",{staticClass:"list-table",attrs:{"show-select":"",headers:t.headers,"disable-sort":"",options:t.moduleOptions,items:t.items,loading:t.loading,"server-items-length":t.pagination?t.pagination.total:0,"loading-text":"Загрузка... Пожалуйста подождите","footer-props":{"show-first-last-page":!0,"items-per-page-options":[5,10,15,30,50,100]}},on:{"update:options":function(e){t.moduleOptions=e},"click:row":t.toDetailRoute},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[n("template",{slot:"footer.prepend"},[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,a=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:"",large:"",loading:t.loading},on:{click:t.toCreateRoute}},"v-btn",a,!1),r),[n("v-icon",[t._v("mdi-plus")])],1)]}}])},[n("span",[t._v("Создать")])]),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,a=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:"",large:"",loading:t.loading,disabled:!t.selected.length},on:{click:t.deleteEntities}},"v-btn",a,!1),r),[n("v-icon",[t._v("mdi-delete")])],1)]}}])},[n("span",[t._v("Удалить выбранное")])])],1)],2)}),[],!1,null,null,null);e.default=l.exports},4249:function(t,e,n){"use strict";n("6d27")},4981:function(t,e,n){"use strict";n.r(e);var r=n("2877"),a=Object(r.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("detail",{attrs:{namespace:"block"},scopedSlots:t._u([{key:"form",fn:function(e){var r=e.setValue,a=e.entity,i=e.createView;return[n("v-text-field",{attrs:{label:"Название",outlined:"",value:a.name},on:{input:function(t){return r("name",t)}}}),n("v-text-field",{attrs:{label:"Заголовок",outlined:"",value:a.title},on:{input:function(t){return r("title",t)}}}),n("with-relation-picker",{attrs:{title:"Изображения",model:"file",query:{type:"image"},value:a.images,valueKey:"file"},on:{input:function(t){return r("images",t)}}}),n("with-relation-picker",{attrs:{title:"Файлы",model:"file",query:{type:"file"},value:a.files,valueKey:"file"},on:{input:function(t){return r("files",t)}}}),n("attributes-picker",{attrs:{value:a.attributes},on:{input:function(t){return r("attributes",t)}}}),n("v-text-field",{attrs:{label:"Ссылка",outlined:"",value:a.link},on:{input:function(t){return r("link",t)}}}),n("content-editor",{attrs:{value:a.content},on:{input:function(t){return r("content",t)}}}),i?t._e():n("edit-list",{attrs:{title:"Дочерние блоки",relationPicker:"",value:a.blocks},on:{input:function(t){return r("blocks",t)}}})]}}])})}),[],!1,null,null,null);e.default=a.exports},5205:function(t,e,n){"use strict";n.r(e);var r=n("2909"),a=n("5530"),i=(n("4de4"),n("c740"),n("a434"),n("99af"),n("d81d"),n("2ef0")),o={components:{BlockDetail:n("4981").default},props:{title:{type:String,default:""},value:{type:[Array,Object],default:function(){return[]}},itemText:{type:[String,Function],default:"name"},single:{type:Boolean,default:!1},relationPicker:{type:Boolean,default:!1}},data:function(){return{items:[],showDetailModal:!1,showDetailEditModal:!1,modalId:null}},methods:{onCreate:function(){this.showDetailModal=!0},setTemplate:function(t,e){this.$set(e,"template_id",t),this.$emit("input",this.value)},onDeleteEditModal:function(){var t=this;this.$emit("input",this.value.filter((function(e){return e.id!==t.modalId}))),this.closeDetailEditModal()},onModalEditUpdate:function(t){var e=this,n=this.sortedValue.findIndex((function(t){return t.id===e.modalId}));this.$set(this.sortedValue,n,Object(a.a)(Object(a.a)(Object(a.a)({},this.sortedValue[n]),t),{},{template_id:this.sortedValue[n].template_id}))},openItemDetail:function(t){this.showDetailEditModal=!0,this.modalId=null==t?void 0:t.id},closeDetailEditModal:function(){this.showDetailEditModal=!1},deleteItem:function(t){var e=Object(i.cloneDeep)(this.sortedValue);e.splice(t,1),this.$emit("input",e)},incrementOrder:function(t){this.$set(t,"order",++t.order),this.$emit("input",this.value)},decrementOrder:function(t){this.$set(t,"order",--t.order),this.$emit("input",this.value)},getItemText:function(t){return"function"==typeof this.itemText?this.itemText(t):t[this.itemText]},openDetailModal:function(){this.showDetailModal=!0},closeDetailModal:function(){this.showDetailModal=!1},confrimEntities:function(){this.single?this.$emit("input",Object(a.a)(Object(a.a)({},this.items),{},{order:0})):this.$emit("input",[].concat(Object(r.a)(this.value),Object(r.a)(this.items.map((function(t){return Object(a.a)(Object(a.a)({},t),{},{order:0})}))))),this.items=[],this.closeDetailModal()}},computed:{sortedValue:function(){return this.single?this.value&&!Array.isArray(this.value)?[this.value]:[]:Object(i.sortBy)(this.value,"order").reverse()}}},c=o,u=(n("4249"),n("2877")),s=Object(u.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-card",{attrs:{outlined:""}},[n("v-list",{attrs:{flat:"",subheader:Boolean(t.title.length)}},[t.title?n("v-subheader",[t._v(t._s(t.title))]):t._e(),n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",[n("v-btn",{attrs:{color:"primary"},on:{click:t.onCreate}},[t._v("Добавить")])],1)],1)],1),t._l(t.sortedValue,(function(e,r){return n("v-list-item",{key:e.id},[n("v-list-item-content",[n("v-list-item-title",{staticClass:"block-header",on:{click:function(n){return t.openItemDetail(e)}}},[t._v(t._s(t.getItemText(e)))])],1),n("v-list-item-action",[n("div",{staticClass:"actions"},[n("picker",{staticClass:"template-field",attrs:{dense:"","hide-details":"",label:"Шаблон",model:"template",textSelector:"title",value:e.template_id},on:{input:function(n){return t.setTemplate(n,e)}}}),n("v-btn",{attrs:{icon:"",disabled:r===t.sortedValue.length-1},on:{click:function(n){return n.stopPropagation(),t.decrementOrder(e,r)}}},[n("v-icon",[t._v("mdi-arrow-down-circle")])],1),n("v-btn",{attrs:{icon:"",disabled:0===r},on:{click:function(n){return n.stopPropagation(),t.incrementOrder(e)}}},[n("v-icon",[t._v("mdi-arrow-up-circle")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.deleteItem(r)}}},[n("v-icon",[t._v("mdi-delete-circle")])],1)],1)])],1)}))],2)],1),n("v-dialog",{attrs:{transition:"dialog-top-transition",value:t.showDetailModal},on:{input:t.closeDetailModal}},[[n("v-card",{staticClass:"modal-detail",attrs:{outlined:""}},[n("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("Добавить блок"),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:t.closeDetailModal}},[n("v-icon",[t._v("mdi-close")])],1)],1),n("v-card-text",[n("picker",{attrs:{multiple:!t.single,returnObject:"",model:"block",label:"Блоки",textSelector:function(t){return t.name?t.name:t.id}},model:{value:t.items,callback:function(e){t.items=e},expression:"items"}})],1),n("v-card-actions",[n("v-btn",{attrs:{depressed:"",color:"primary"},on:{click:t.confrimEntities}},[t._v("Сохранить")])],1)],1)]],2),t.showDetailEditModal?n("v-dialog",{attrs:{transition:"dialog-top-transition",value:t.showDetailEditModal},on:{input:t.closeDetailEditModal}},[[n("BlockDetail",{key:t.modalId,attrs:{modal:"",id:t.modalId},on:{delete:t.onDeleteEditModal,close:t.closeDetailEditModal,update:t.onModalEditUpdate}})]],2):t._e()],1)}),[],!1,null,"3e20fbd2",null);e.default=s.exports},"553d":function(t,e,n){"use strict";n.r(e);var r=n("ade3"),a=n("2909"),i=n("1da1"),o=n("5530"),c=(n("96cf"),n("a15b"),n("d81d"),n("ac1f"),n("841c"),n("99af"),n("a434"),n("2f62")),u=n("2ef0"),s={props:{value:{type:Array,default:function(){return[]}},itemText:{type:[String,Function],default:"name"},query:{type:Object,default:function(){}},model:{type:String,required:!0},title:{type:String,required:!0},insertKey:{type:String,default:"value"},modelInsert:{type:String}},data:function(){return{currentItem:null,currentValue:"",searchString:"",showChooseModel:!1,loading:!1,items:[]}},methods:Object(o.a)(Object(o.a)({},Object(c.b)("alerts",["pushAlert"])),{},{getItems:function(t){var e=this;return Object(i.a)(regeneratorRuntime.mark((function n(){var r,a,i,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,r=e.multiple?e.value.map((function(t){return t.id})).join(","):e.value?e.value.id?e.value.id:e.value:null,(a=Object(o.a)(Object(o.a)({},e.query),{},{ids:r})).search=t,n.prev=4,n.next=7,e.$store.dispatch("".concat(e.model,"/nomenclature"),a);case 7:i=n.sent,e.items=i,n.next=14;break;case 11:n.prev=11,n.t0=n.catch(4),e.pushAlert({type:"error",content:(null===n.t0||void 0===n.t0||null===(c=n.t0.data)||void 0===c?void 0:c.exception)||"Произошла техническая ошибка"});case 14:return n.prev=14,e.loading=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[4,11,14,17]])})))()},onAdd:function(){this.$emit("input",[].concat(Object(a.a)(this.value),[Object(o.a)(Object(o.a)({},this.currentItem),{},Object(r.a)({},this.insertKey,this.currentValue))])),this.currentItem=null,this.currentValue=""},deleteItem:function(t){var e=Object(u.cloneDeep)(this.value);e.splice(t,1),this.$emit("input",e)}}),watch:{searchString:function(){var t=this;return Object(i.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null===(n=t.searchString)||void 0===n?void 0:n.length)>3)){e.next=3;break}return e.next=3,t.getItems(t.searchString);case 3:case"end":return e.stop()}}),e)})))()}},beforeMount:function(){var t=this;return Object(i.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getItems(t.searchString);case 2:case"end":return e.stop()}}),e)})))()}},l=s,d=(n("fe6e"),n("2877")),f=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"base-picker",staticStyle:{"margin-bottom":"16px"}},[n("v-card",{attrs:{outlined:""}},[n("v-list",{attrs:{flat:"",subheader:""}},[n("v-subheader",[t._v(t._s(t.title))]),n("v-list-item",[n("v-list-item-content",[n("v-container",[n("v-row",[n("v-col",[n("picker",{attrs:{label:"Выберите или создайте",model:t.model,"return-object":"",query:t.query,textSelector:"name"},model:{value:t.currentItem,callback:function(e){t.currentItem=e},expression:"currentItem"}})],1),n("v-col",[n("div",{staticClass:"d-flex align-center"},[t.modelInsert?n("picker",{staticStyle:{flex:"1"},attrs:{label:"Значение",model:t.modelInsert,"return-object":"",textSelector:"name"},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}}):n("v-text-field",{attrs:{label:"Значение",outlined:""},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}}),n("v-btn",{staticClass:"mb-9 ml-6",attrs:{large:"",color:"primary",disabled:!(t.currentItem&&t.currentValue)},on:{click:t.onAdd}},[t._v("Добавить")])],1)])],1)],1)],1)],1),t._l(t.value,(function(e,r){return n("v-list-item",{key:r},[n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e[t.itemText])+": "+t._s(e[t.insertKey]))])],1),n("v-list-item-action",[n("div",{staticClass:"actions"},[n("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.deleteItem(r)}}},[n("v-icon",[t._v("mdi-delete-circle")])],1)],1)])],1)}))],2)],1)],1)}),[],!1,null,"2458cee4",null);e.default=f.exports},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"auth",(function(){return y})),n.d(r,"alerts",(function(){return O})),n.d(r,"page",(function(){return _})),n.d(r,"file",(function(){return j})),n.d(r,"block",(function(){return x})),n.d(r,"attribute",(function(){return w})),n.d(r,"menu",(function(){return E})),n.d(r,"menuItem",(function(){return S})),n.d(r,"template",(function(){return M})),n.d(r,"order",(function(){return D}));var a=n("1da1"),i=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("96cf"),n("b0c0"),n("2b0e")),o=n("5530"),c=n("2f62"),u={computed:Object(o.a)({},Object(c.c)("alerts",["alerts"])),methods:Object(o.a)(Object(o.a)({},Object(c.b)("alerts",["closeAlert"])),{},{getOffsetStyle:function(t){return{transform:"translateY(".concat(64*t,"px)")}}})},s=u,l=(n("5c0b"),n("2877")),d=Object(l.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("transition",{attrs:{name:"fade-transition",mode:"out-in"}},[n("router-view")],1),n("div",t._l(t.alerts,(function(e,r){return n("v-snackbar",{key:r,style:t.getOffsetStyle(r),attrs:{app:"",top:"",right:"",value:!0,color:e.type,timeout:-1},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[n("v-btn",t._b({attrs:{icon:""},on:{click:function(e){return t.closeAlert(r)}}},"v-btn",a,!1),[n("v-icon",[t._v("mdi-close")])],1)]}}],null,!0)},[t._v(t._s(e.content)+" ")])})),1)],1)}),[],!1,null,null,null),f=d.exports,m=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),p=n("025e"),v=n("b441");i.default.use(m.a);var h=[{path:"/login",name:"Login",component:function(){return n.e("chunk-2d0a314a").then(n.bind(null,"013f"))}},{path:"/",component:function(){return n.e("chunk-0ce4d726").then(n.bind(null,"16c9"))},meta:{requiresAuth:!0},children:[{path:"/user",name:"UserList",meta:{menu:{title:"Пользователи"}},component:function(){return n.e("chunk-2d0b97c2").then(n.bind(null,"32c0"))}},{path:"/user/:id",name:"UserDetail",component:function(){return n.e("chunk-2d0efceb").then(n.bind(null,"9a4a"))}},{path:"/page",alias:"",name:"PageList",meta:{menu:{title:"Страницы"}},component:function(){return n.e("chunk-2d0ab7fe").then(n.bind(null,"1614"))}},{path:"/page/create",name:"PageCreate",component:function(){return n.e("chunk-2d0c78c3").then(n.bind(null,"50a3"))}},{path:"/page/:id",name:"PageDetail",component:function(){return n.e("chunk-2d0c78c3").then(n.bind(null,"50a3"))}},{path:"/menu",name:"MenuList",meta:{menu:{title:"Страницы"}},component:function(){return n.e("chunk-2d238262").then(n.bind(null,"fdc1"))}},{path:"/menu/create",name:"MenuCreate",component:function(){return n.e("chunk-2d2226bd").then(n.bind(null,"cf15"))}},{path:"/menu/:id",name:"MenuDetail",component:function(){return n.e("chunk-2d2226bd").then(n.bind(null,"cf15"))}},{path:"/block",name:"BlockList",meta:{menu:{title:"Блок"}},component:function(){return n.e("chunk-2d21aaed").then(n.bind(null,"bd0e"))}},{path:"/block/create",name:"BlockCreate",component:function(){return Promise.resolve().then(n.bind(null,"4981"))}},{path:"/block/:id",name:"BlockDetail",component:function(){return Promise.resolve().then(n.bind(null,"4981"))}},{path:"/template",name:"TemplateList",meta:{menu:{title:"Шаблоны"}},component:function(){return n.e("chunk-2d0d2eb9").then(n.bind(null,"5b0f"))}},{path:"/template/create",name:"TemplatCreate",component:function(){return n.e("chunk-2d0a437d").then(n.bind(null,"0601"))}},{path:"/template/:id",name:"TemplateDetail",component:function(){return n.e("chunk-2d0a437d").then(n.bind(null,"0601"))}},{path:"/order",name:"OrderList",meta:{menu:{title:"Заявки"}},component:function(){return n.e("chunk-2d0c08f2").then(n.bind(null,"41fe"))}},{path:"/order/:id",name:"OrderDetail",component:function(){return n.e("chunk-2d0b19b9").then(n.bind(null,"2126"))}}]}],b=new m.a({mode:"history",base:"/cms/",routes:h});b.beforeEach((function(t,e,n){t.matched.some((function(t){return t.meta.requiresAuth}))?Object(p.c)(v.e)?n():n({name:"Login"}):n()}));var g=b,k=n("5ce5"),y={namespaced:!0,state:{user:null,token:null},actions:{login:function(t,e){return Object(a.a)(regeneratorRuntime.mark((function n(){var r,a,i,o,c,u,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.commit,a=t.dispatch,i=t.state,o=e.email,c=e.password,n.next=4,k.a.client.post("/login",{email:o,password:c});case 4:if(u=n.sent,s=u.data,r("SET_TOKEN",s),Object(p.e)(v.e,s),k.a.setToken(s),i.user){n.next=12;break}return n.next=12,a("getUser");case 12:case"end":return n.stop()}}),n)})))()},logout:function(t){return Object(a.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.commit)("SET_USER",null),n("SET_TOKEN",null),e.next=5,k.a.client.post("/logout");case 5:case"end":return e.stop()}}),e)})))()},getUser:function(t){return Object(a.a)(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,k.a.client.get("/user");case 3:r=e.sent,a=r.data,n("SET_USER",a);case 6:case"end":return e.stop()}}),e)})))()}},mutations:{SET_USER:function(t,e){t.user=e},SET_TOKEN:function(t,e){e||Object(p.d)(v.e),t.token=e}}},O=(n("a434"),{namespaced:!0,state:{alerts:[]},mutations:{PUSH_ALERT:function(t,e){t.alerts.push(e)},REMOVE_ALERT:function(t){t.alerts.shift()},CLOSE_ALERT:function(t,e){t.alerts.splice(e,1)}},actions:{pushAlert:function(t,e){var n=t.commit;n("PUSH_ALERT",e),setTimeout((function(){n("REMOVE_ALERT")}),7e3)},closeAlert:function(t,e){(0,t.commit)("CLOSE_ALERT",e)}}}),_=Object(p.b)("page"),j=Object(p.b)("file"),x=Object(p.b)("block"),w=Object(p.b)("attribute",{state:{entities:[]},mutations:{SET_ENTITIES:function(t,e){t.entities=e}},actions:{getEntities:function(t){return Object(a.a)(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,k.a.client.get("/attribute");case 3:r=e.sent,a=r.data,n("SET_ENTITIES",a);case 6:case"end":return e.stop()}}),e)})))()}}}),E=Object(p.b)("menu"),S=Object(p.b)("menuItem",{url:"menu-item"}),M=Object(p.b)("template"),D=Object(p.b)("order");i.default.use(c.a);var I=new c.a.Store({strict:!0,modules:r}),$=n("ce5b"),A=n.n($),C=(n("bf40"),n("e1bf"));i.default.use(A.a);var T=new A.a({theme:{options:{customProperties:!0},themes:{light:{primary:"#096ed1",secondary:"#001526",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},dark:{primary:"#096ed1",secondary:"#001526",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}},dark:!0},lang:{locales:{ru:C.a},current:"ru"}}),R=n("58ca");(n("e792"),n("d5e8"),n("5363"),n("159b"),n("ac1f"),n("5319"),n("14db")).keys().forEach((function(t){var e=t.replace(/^.*[\\/]/,"").replace(/\.[^.]+$/,"");i.default.component(e,(function(t){n.e("chunk-2d0b5d0a").then(function(){var r=[n("1b03")("./".concat(e))];t.apply(null,r)}.bind(this)).catch(n.oe)}))})),i.default.config.productionTip=!1,i.default.use(R.a),new i.default({router:g,store:I,vuetify:T,render:function(t){return t(f)},beforeCreate:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(p.c)(v.e),t.$store.commit("auth/SET_TOKEN",n),e.next=4,k.a.initClient(function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.response||401!==n.response.status||!Object(p.c)(v.e)){e.next=3;break}return e.next=3,t.$store.dispatch("auth/logout");case 3:"Login"!==t.$route.name&&t.$router.push({name:"Login"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:if(!n){e.next=16;break}return k.a.setToken(n),e.prev=6,e.next=9,t.$store.dispatch("auth/getUser");case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(6),e.next=15,t.$store.dispatch("auth/logout");case 15:"Login"!==t.$route.name&&t.$router.push({name:"Login"});case 16:case"end":return e.stop()}}),e,null,[[6,11]])})))()}}).$mount("#app")},"587b":function(t,e,n){"use strict";n("f729")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"5ce5":function(t,e,n){"use strict";var r=n("5530"),a=n("1da1"),i=n("d4ec"),o=n("bee2"),c=(n("96cf"),n("d3b7"),n("bc3a")),u=n.n(c),s=n("b441"),l=n("b50d"),d=n("467f"),f={},m=u.a.CancelToken,p=function(t){if(console.log(t),"get"===t.method){var e=localStorage.getItem("request:".concat(JSON.stringify({url:t.url,params:t.params})));if(e)return new Promise((function(t,n){d(t,n,JSON.parse(e))}))}return new Promise((function(e,n){l(t).then((function(r){localStorage.setItem("request:".concat(JSON.stringify({url:t.url,params:t.params})),JSON.stringify(r)),setTimeout((function(){localStorage.removeItem("request:".concat(JSON.stringify({url:t.url,params:t.params})))}),s.a),d(e,n,r)})).catch(n)}))};e.a=new(function(){function t(){Object(i.a)(this,t),this.client=null}return Object(o.a)(t,[{key:"initClient",value:function(){var t=Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.client=u.a.create({baseURL:"".concat(s.b),adapter:p,withCredentials:!0,headers:{Accept:"application/json"}});case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getCSRFCookie",value:function(){var t=Object(a.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.client.get("".concat(s.c,"/sanctum/csrf-cookie"));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setToken",value:function(t){this.client.defaults.headers=Object(r.a)(Object(r.a)({},this.client.defaults.headers),{},{Authorization:"Bearer ".concat(t)})}},{key:"setErrorInterceptors",value:function(t){this.client.interceptors.request.use((function(t){try{if(f[t.url]){var e=m.source();f[t.url].cancel(),f[t.url]=e,t.cancelToken=e.token}else{var n=m.source();t.cancelToken=n.token,f[t.url]=n}}catch(t){console.log(t)}return t}),(function(e){return e.response&&500!==e.response.status&&t(e),Promise.reject(e.response)}))}}]),t}())},6151:function(t,e,n){},"63bf":function(t,e,n){var r={"./Attribute/AttributeDetail.vue":["0a1c","chunk-2d0ae539"],"./Block/BlockDetail.vue":["4981"],"./File/FileDetail.vue":["7f0f","chunk-2d0e267b"],"./Menu/MenuDetail.vue":["cf15","chunk-2d2226bd"],"./MenuItem/MenuItemDetail.vue":["7216"],"./Order/OrderDetail.vue":["2126","chunk-2d0b19b9"],"./Page/PageDetail.vue":["50a3","chunk-2d0c78c3"],"./Template/TemplateDetail.vue":["0601","chunk-2d0a437d"],"./User/UserDetail.vue":["9a4a","chunk-2d0efceb"]};function a(t){if(!n.o(r,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[t],a=e[0];return Promise.all(e.slice(1).map(n.e)).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id="63bf",t.exports=a},"65da":function(t,e,n){},"6bb3":function(t,e,n){},"6d27":function(t,e,n){},7216:function(t,e,n){"use strict";n.r(e);var r={metaInfo:{title:"Меню"}},a=n("2877"),i=Object(a.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("detail",{attrs:{namespace:"menuItem"},scopedSlots:t._u([{key:"form",fn:function(t){var e=t.setValue,r=t.entity;return[n("v-text-field",{attrs:{label:"Название",outlined:"",value:r.title},on:{input:function(t){return e("title",t)}}}),n("v-text-field",{attrs:{label:"Ссылка",outlined:"",value:r.link},on:{input:function(t){return e("link",t)}}}),n("picker",{attrs:{label:"Родительский пункт",model:"menuItem",url:"menu-item",textSelector:"title",value:r.parent_id},on:{input:function(t){return e("parent_id",t)}}}),n("attributes-picker",{attrs:{value:r.attributes},on:{input:function(t){return e("attributes",t)}}})]}}])})}),[],!1,null,null,null);e.default=i.exports},"72d2":function(t,e,n){"use strict";n.r(e);var r=n("2909"),a=n("1da1"),i=n("5530"),o=(n("96cf"),n("a9e3"),n("d3b7"),n("3ca3"),n("ddb0"),n("99af"),n("a15b"),n("d81d"),n("ac1f"),n("841c"),n("c740"),n("fb6a"),n("a434"),n("025e")),c=n("2f62"),u={props:{label:{type:String},multiple:{type:Boolean,default:!1},value:{type:[Object,Array,String,Number],default:function(){return this.multiple?[]:null}},query:{type:Object,default:function(){}},model:{type:String,required:!0},url:{type:String},textSelector:{type:[String,Function],default:"name"},returnObject:{type:Boolean,default:!1}},data:function(){return{detailModal:!1,modalId:void 0,searchString:"",loading:!1,items:[]}},computed:{prependIcon:function(){return"mdi-plus"},modalComponentName:function(){var t=Object(o.a)(this.model);return function(){return n("63bf")("./".concat(t,"/").concat(t,"Detail.vue"))}}},methods:Object(i.a)(Object(i.a)({},Object(c.b)("alerts",["pushAlert"])),{},{getItemText:function(t){return"function"==typeof this.textSelector?this.textSelector(t):t[this.textSelector]},onPrependClick:function(){!this.multiple&&this.value?this.openDetailModal(this.value):this.openDetailModal()},openDetailModal:function(t){!Number(t)||"number"!=typeof t&&"string"!=typeof t||(this.modalId=t),this.detailModal=!0},closeDetailModal:function(){this.modalId=void 0,this.detailModal=!1},getItems:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function n(){var r,a,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,r="",e.value&&(r=e.multiple?e.returnObject?e.value.map((function(t){return t.id})).join(","):e.value:e.returnObject?e.value.id:e.value),(a=Object(i.a)({ids:r},e.query)).search=t,n.prev=5,n.next=8,e.$store.dispatch("".concat(e.model,"/nomenclature"),a);case 8:o=n.sent,e.items=o,n.next=16;break;case 12:n.prev=12,n.t0=n.catch(5),console.log(n.t0,e.model),e.pushAlert({type:"error",content:(null===n.t0||void 0===n.t0||null===(c=n.t0.data)||void 0===c?void 0:c.exception)||"Произошла техническая ошибка"});case 16:return n.prev=16,e.loading=!1,n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[5,12,16,19]])})))()},onModalCreate:function(t){this.closeDetailModal(),this.items.push(t);var e=this.multiple?[].concat(Object(r.a)(this.value),[this.returnObject?t:t.id]):this.returnObject?t:t.id;this.$emit("input",e)},onModalUpdate:function(t){var e=this.items.findIndex((function(e){return e.id===t.id}));this.$set(this.items,e,t),this.$set(this.value,e,t),this.closeDetailModal()},onInput:function(t){this.$emit("input",t)},removeItem:function(t){if(this.multiple){var e=this.value.slice();e.splice(t,1),this.$emit("input",e),this.closeDetailModal()}else this.$emit("input",null),this.closeDetailModal()}}),watch:{searchString:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=t.searchString)||void 0===n||!n.length){e.next=3;break}return e.next=3,t.getItems(t.searchString);case 3:case"end":return e.stop()}}),e)})))()}},beforeMount:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getItems(t.searchString);case 2:case"end":return e.stop()}}),e)})))()}},s=u,l=n("2877"),d=Object(l.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"base-picker"},[n("v-autocomplete",t._b({attrs:{clearable:"",outlined:"",loading:t.loading,label:t.label,items:t.items,"hide-no-data":"",chips:t.multiple,"return-object":t.multiple||t.returnObject,"item-value":"id","item-text":t.textSelector,value:t.value,multiple:t.multiple,"search-input":t.searchString,"prepend-icon":t.prependIcon},on:{"update:searchInput":function(e){t.searchString=e},"update:search-input":function(e){t.searchString=e},"click:prepend":t.onPrependClick,input:t.onInput},scopedSlots:t._u([{key:"selection",fn:function(e){var r=e.item,a=e.index;return[n("v-chip",{staticClass:"selectable",attrs:{small:t.$attrs.dense,label:"",close:""},on:{click:function(e){return e.stopPropagation(),t.openDetailModal(r.id)},"click:close":function(e){return t.removeItem(a)}}},[t._v(t._s(t.getItemText(r)))])]}}])},"v-autocomplete",t.$attrs,!1)),n("v-dialog",{attrs:{transition:"dialog-top-transition",value:t.detailModal},on:{input:t.closeDetailModal}},[[n(t.modalComponentName,{key:t.modalId,tag:"component",attrs:{modal:"",id:t.modalId},on:{close:t.closeDetailModal,create:t.onModalCreate,update:t.onModalUpdate}})]],2)],1)}),[],!1,null,null,null);e.default=d.exports},7355:function(t,e,n){},9738:function(t,e,n){"use strict";n.r(e);var r=n("1ab4"),a=n("4377"),i=n("5924"),o=n("1d91"),c=n("58e6"),u=n("05f2"),s=n("2718"),l=n("c088"),d={components:{EditorContent:r.b},props:{value:{type:String,default:""}},data:function(){return{editor:null,extensions:[a.a,i.a,o.a,c.a,u.a,s.a,l.a]}},watch:{value:function(t){this.editor.getHTML()===t||this.editor.commands.setContent(this.value,!1)}},mounted:function(){var t=this;this.editor=new r.a({extensions:this.extensions,content:this.value,onUpdate:function(){t.$emit("input",t.editor.getHTML())}})},beforeDestroy:function(){this.editor.destroy()}},f=d,m=(n("aa40"),n("2877")),p=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.editor?n("div",{staticClass:"content-editor"},[n("div",{staticClass:"actions"},[n("v-btn",{class:{"is-active":t.editor.isActive("textStyle",{fontFamily:"Inter"})},on:{click:function(e){t.editor.chain().focus().setFontFamily("Inter").run()}}},[t._v(" Inter ")]),n("v-btn",{class:{"is-active":t.editor.isActive("textStyle",{fontFamily:"Comic Sans MS, Comic Sans"})},on:{click:function(e){t.editor.chain().focus().setFontFamily("Comic Sans MS, Comic Sans").run()}}},[t._v(" Comic Sans ")]),n("v-btn",{class:{"is-active":t.editor.isActive("textStyle",{fontFamily:"serif"})},on:{click:function(e){t.editor.chain().focus().setFontFamily("serif").run()}}},[t._v(" serif ")]),n("v-btn",{class:{"is-active":t.editor.isActive("textStyle",{fontFamily:"monospace"})},on:{click:function(e){t.editor.chain().focus().setFontFamily("monospace").run()}}},[t._v(" monospace ")]),n("v-btn",{class:{"is-active":t.editor.isActive("textStyle",{fontFamily:"cursive"})},on:{click:function(e){t.editor.chain().focus().setFontFamily("cursive").run()}}},[t._v(" cursive ")]),n("v-btn",{on:{click:function(e){t.editor.chain().focus().unsetFontFamily().run()}}},[t._v(" Remove font-family ")]),n("v-btn",{class:{"is-active":t.editor.isActive("textStyle",{fontFamily:"monospace"})},on:{click:function(e){t.editor.chain().focus().toggleBulletList().run()}}},[t._v(" list ")])],1),n("editor-content",{staticClass:"content-editor",attrs:{editor:t.editor}})],1):t._e()}),[],!1,null,"2d11978d",null);e.default=p.exports},"9c0c":function(t,e,n){},"9cdc":function(t,e,n){"use strict";n.r(e);var r=n("1da1"),a=n("2909"),i=n("5530"),o=(n("96cf"),n("99af"),n("a434"),n("2f62")),c=n("2ef0"),u={props:{value:{type:Array,default:function(){return[]}},itemText:{type:[String,Function],default:"name"}},data:function(){return{currentAttribute:null,currentValue:"",search:"",showChooseModel:!1}},methods:Object(i.a)(Object(i.a)({},Object(o.b)("attribute",["getEntities"])),{},{onAdd:function(){this.$emit("input",[].concat(Object(a.a)(this.value),[{attribute:this.currentAttribute,value:this.currentValue}])),this.currentAttribute=null,this.currentValue=""},deleteItem:function(t){var e=Object(c.cloneDeep)(this.value);e.splice(t,1),this.$emit("input",e)}}),computed:Object(i.a)({},Object(o.c)("attribute",["entities"])),beforeMount:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getEntities();case 2:case"end":return e.stop()}}),e)})))()}},s=u,l=(n("0acd"),n("2877")),d=Object(l.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"attributes-picer"},[n("v-card",{attrs:{outlined:""}},[n("v-list",{attrs:{flat:"",subheader:""}},[n("v-subheader",[t._v("Аттрибуты")]),n("v-list-item",[n("v-list-item-content",[n("v-container",[n("v-row",[n("v-col",[n("picker",{attrs:{label:"Аттрибут",model:"attribute","return-object":"",textSelector:"name"},model:{value:t.currentAttribute,callback:function(e){t.currentAttribute=e},expression:"currentAttribute"}})],1),n("v-col",[n("div",{staticClass:"d-flex align-center"},[n("v-text-field",{attrs:{label:"Значение",outlined:""},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}}),n("v-btn",{staticClass:"mb-9 ml-6",attrs:{large:"",color:"primary",disabled:!(t.currentAttribute&&t.currentValue)},on:{click:t.onAdd}},[t._v("Добавить")])],1)])],1)],1)],1)],1),t._l(t.value,(function(e,r){return n("v-list-item",{key:r},[n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.attribute.name)+": "+t._s(e.value))])],1),n("v-list-item-action",[n("div",{staticClass:"actions"},[n("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.deleteItem(r)}}},[n("v-icon",[t._v("mdi-delete-circle")])],1)],1)])],1)}))],2)],1)],1)}),[],!1,null,"7821ec32",null);e.default=d.exports},"9d26":function(t,e,n){"use strict";n.r(e);var r=n("2877"),a=Object(r.a)({},undefined,undefined,!1,null,null,null);e.default=a.exports},aa40:function(t,e,n){"use strict";n("6151")},acde:function(t,e,n){"use strict";n("09fb")},ae8e:function(t,e,n){"use strict";n("0c60")},b441:function(t,e,n){"use strict";n.d(e,"e",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return c}));var r="TOKEN",a="http://sanat/api/cms",i=(Object({NODE_ENV:"production",VUE_APP_API_DEBOUNCE:"6000",VUE_APP_API_URL:"http://sanat/api/cms",VUE_APP_PKG_NAME:"cms",VUE_APP_URL:"http://sanat",BASE_URL:"/assets/cms/"}).VUE_APP_API_AUTH_URL,"http://sanat"),o="cms",c="6000"},d4d2:function(t,e,n){"use strict";n.r(e);var r={beforeMount:function(){document.querySelector("html").style.overflow="hidden"},beforeDestroy:function(){document.querySelector("html").style.overflow="auto"}},a=(n("587b"),n("2877")),i=Object(a.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-main",[n("section",{staticClass:"main-block"},[n("div",{staticClass:"block-bg"}),n("div",{staticClass:"block-bg__elem block-bg__elem--left"}),n("div",{staticClass:"block-bg__elem block-bg__elem--right"}),n("div",{staticClass:"block-bg__elem block-bg__elem--center"}),n("div",{staticClass:"block-bg__elem block-bg__elem--line"}),t._t("default")],2)])}),[],!1,null,"60ba8868",null);e.default=i.exports},f62b:function(t,e,n){"use strict";n("65da")},f729:function(t,e,n){},fb62:function(t,e,n){"use strict";n.r(e);var r={data:function(){return{drawer:!1}},computed:{menu:function(){return[]}}},a=n("2877"),i=Object(a.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{app:"",dark:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",{attrs:{dense:"",rounded:""}},t._l(t.menu,(function(e,r){return n("v-list-item",{key:r,attrs:{link:"",exact:"",to:e.to}},[n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),1)],1)}),[],!1,null,null,null);e.default=i.exports},fd2d:function(t,e,n){"use strict";n.r(e);var r=n("2877"),a=Object(r.a)({},undefined,undefined,!1,null,null,null);e.default=a.exports},fe6e:function(t,e,n){"use strict";n("6bb3")}});
//# sourceMappingURL=app.146f3db1.js.map